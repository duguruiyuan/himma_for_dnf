<!DOCTYPE html>
<html lang="en" xmlns:v-bind="http://www.w3.org/1999/xhtml" xmlns:v-on="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="UTF-8">
    <title>Hello Vue</title>
    <script src="https://unpkg.com/vue"></script>
    <!-- 因为 AJAX 库和通用工具的生态已经相当丰富，Vue 核心代码没有重复 -->
    <!-- 提供这些功能以保持精简。这也可以让你自由选择自己更熟悉的工具。 -->
    <script src="https://cdn.jsdelivr.net/npm/axios@0.12.0/dist/axios.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/lodash@4.13.1/lodash.min.js"></script>
</head>

<body>

    <div id="app">
        <p>原来的message：{{message}}</p>
        <p>现在的message：{{nowMessage}}</p>
        <p>最后的message：{{lastMessage()}}</p>

    </div>
    <div id="app-1">
        <p>
            是数字还是字母：
            <input v-model="question">
        </p>
        <p>{{answer}}</p>
    </div>


</div>



<script>
    var app = new Vue({
        el:'#app',
        data:{
            message: Date.now().toString()
        },
        computed:{
            nowMessage:function () {
                return this.message.split('').reverse().join('');
            }
        },
        methods:{
            lastMessage:function () {
                return this.message.split('').reverse().join('');
            }
        }
    })

    var app1 = new Vue({
        el:'#app-1',
        data:{
            question:'',
            answer:'我可以给你一个结果'
        },
        watch:{
            question:function (newQuestion) {
                this.answer = '正在输入。。。。'
                this.getAnsWer();
            }
        },
        methods:{
            getAnsWer: _.debounce(
                function () {
                    if (this.question.indexOf('?') === -1) {
                        this.answer = '问题通常包含问号。'
                        return
                    }
                    this.answer = '正在计算结果'
                    axios.get('https://yesno.wtf/api')
                        .then(function (response) {
                            app1.answer = _.capitalize(response.data.answer)
                        })
                        .catch(function (error) {
                            app1.answer = 'Error! Could not reach the API. ' + error
                        })
                },
                500// 这是我们为判定用户停止输入等待的毫秒数
            )
        }
    })


</script>

</body>
</html>